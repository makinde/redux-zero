!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e(t["redux-zero"]={},t.React)}(this,function(t,s){"use strict";var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var u=function(){return(u=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function o(t,e){for(var r in t)if(t[r]!==e[r])return!1;for(var r in e)if(!(r in t))return!1;return!0}function e(t,e,r){return"object"==typeof t?null:new Error("Invalid prop "+e+" supplied to "+r)}function c(r,n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"function"==typeof n.middleware?n.middleware(n,r,t):function(t,e){if(null!=e){if(e.then)return e.then(t.setState);t.setState(e)}}(n,r.apply(void 0,[n.getState()].concat(t)))}}var p,a=(i(r,p=s.Component),r.prototype.componentWillMount=function(){this.unsubscribe=this.context.store.subscribe(this.update)},r.prototype.componentWillUnmount=function(){this.unsubscribe(this.update)},r.prototype.componentWillReceiveProps=function(t,e){var r=this.getProps(t,e);o(r,this.state)||this.setState(r)},r.prototype.getProps=function(t,e){var r=t.mapToProps,n=e.store&&e.store.getState()||{};return r?r(n,t):n},r.prototype.getActions=function(){return function(t,e,r){t="function"==typeof t?t(e,r):t;var n={};for(var o in t){var i=t[o];n[o]=c(i,e)}return n}(this.props.actions,this.context.store,this.props)},r.prototype.render=function(){return this.props.children(u({store:this.context.store},this.state,this.actions))},r.contextTypes={store:e},r);function r(t,e){var r=p.call(this,t,e)||this;return r.update=function(){var t=r.getProps(r.props,r.context);o(t,r.state)||r.setState(t)},r.state=r.getProps(t,e),r.actions=r.getActions(),r}var f,l="createContext"in s?s.createContext(void 0):{Provider:function(t){var e=t.children;return s.Children.only(e)}},h=(i(d,f=s.Component),d.prototype.getChildContext=function(){return{store:this.props.store}},d.prototype.render=function(){var t=this.props,e=t.store,r=t.children;return s.createElement(l.Provider,{value:e},r)},d.childContextTypes={store:e},d);function d(){return null!==f&&f.apply(this,arguments)||this}function v(){return s.useContext(l)}var y="undefined"!=typeof window?s.useLayoutEffect:s.useEffect;t.connect=function(n,o){return void 0===o&&(o={}),function(r){return i(t,e=s.Component),t.prototype.render=function(){var e=this.props;return s.createElement(a,u({},e,{mapToProps:n,actions:o}),function(t){return s.createElement(r,u({},t,e))})},t;function t(){return null!==e&&e.apply(this,arguments)||this}var e}},t.Provider=h,t.Connect=a,t.useStore=v,t.useSelector=function(t){var e,r=v(),n=s.useReducer(function(t){return t+1},0)[1],o=s.useRef(void 0),i=s.useRef(void 0),u=s.useRef(void 0);try{e=o.current!==t||u.current?t(r.getState()):i.current}catch(t){var c="An error occurred while selecting the store state: "+t.message+".";throw u.current&&(c+="\nThe error may be related with this previous error:\n"+u.current.stack+"\n\nOriginal stack trace:"),new Error(c)}return y(function(){o.current=t,i.current=e,u.current=void 0}),y(function(){function t(){try{var t=o.current(r.getState());if(t===i.current)return;i.current=t}catch(t){u.current=t}n({})}var e=r.subscribe(t);return t(),function(){return e()}},[r]),e},t.useAction=function(t){var e=v();return s.useMemo(function(){return c(t,e)},[e,t])},Object.defineProperty(t,"__esModule",{value:!0})});
